'use strict';

exports.__esModule = true;
function defaultClassNameReplacer(className, index) {
  return 'emotion-' + index;
}

var componentSelectorClassNamePattern = /\.e[a-zA-Z0-9-]+[0-9]+/;

var replaceClassNames = exports.replaceClassNames = function replaceClassNames(selectors, styles, code, key) {
  var replacer = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : defaultClassNameReplacer;

  var index = 0;
  var classRegex = new RegExp('^\\.' + key + '-([a-zA-Z0-9-]+)');

  return selectors.reduce(function (acc, className) {
    if (classRegex.test(className) || componentSelectorClassNamePattern.test(className)) {
      var escapedRegex = new RegExp(className.replace('.', '').replace(/[-[\]{}()*+?.,\\^$|#\s]/g, '\\$&'), 'g');
      return acc.replace(escapedRegex, replacer(className, index++));
    }
    return acc;
  }, '' + styles + (styles ? '\n\n' : '') + code);
};